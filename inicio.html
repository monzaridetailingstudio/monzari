<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio Simple</title>
</head>
<body>
  <h1 id="bienvenida">Cargando usuario...</h1>

  <div id="perfil">
    <h2>Perfil</h2>
    <p><strong>Nombre:</strong> <span id="nombre"></span></p>
    <p><strong>Email:</strong> <span id="email"></span></p>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <script>
    // Configuración Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDy7vpjCRM3btGVthbHT5q0GmucM50fQso",
      authDomain: "monzariclub.firebaseapp.com",
      projectId: "monzariclub",
      storageBucket: "monzariclub.appspot.com",
      messagingSenderId: "806224561650",
      appId: "1:806224561650:web:e7b25afbcb51238928576b"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Esperar usuario logueado
    auth.onAuthStateChanged(async (user) => {
      if (user) {
        const uid = user.uid;
        try {
          const docRef = db.collection("Usuarios").doc(uid);
          const docSnap = await docRef.get();

          if (docSnap.exists) {
            const datos = docSnap.data();
            const nombre = datos.nombre || "Sin nombre";
            const email = datos.email || user.email;

            document.getElementById("bienvenida").textContent = Hola, ${nombre};
            document.getElementById("nombre").textContent = nombre;
            document.getElementById("email").textContent = email;
          } else {
            document.getElementById("bienvenida").textContent = "No se encontró el documento del usuario.";
            console.log("Documento de usuario no encontrado en Firestore.");
          }
        } catch (error) {
          console.error("Error leyendo Firestore:", error);
        }
      } else {
        // No hay usuario logueado
        window.location.href = "login.html";
      }
    });
  </script>
</body>
</html>
